FROM container-registry.oracle.com/database/express:latest

ENV APP_DIR /home/oracle/iot2

RUN mkdir ${APP_DIR}
# RUN  echo "yum install jdk-21"  | su

ENV DOWNLOAD https://download.java.net/openjdk/jdk21/ri/openjdk-21+35_linux-x64_bin.tar.gz
RUN curl -L ${DOWNLOAD} -o ${APP_DIR}/jdk-21.tar.gz
RUN tar xf ${APP_DIR}/jdk-21.tar.gz -C ${APP_DIR}
RUN rm ${APP_DIR}/jdk-21.tar.gz


ENV TZ Europe/Berlin
COPY target/iot2Batch.jar ${APP_DIR}/
COPY docker/oracle/iot2.sh ${APP_DIR}/
COPY docker/oracle/endOfDay.sh ${APP_DIR}/

RUN ln -s ${APP_DIR}/iot2.sh ${APP_DIR}/iot2
RUN ln -s ${APP_DIR}/endOfDay.sh ${APP_DIR}/endOfDay

ENV JAVA_HOME $APP_DIR/jdk-21
ENV PATH $PATH:$APP_DIR:$JAVA_HOME/bin




